---
title: Python çŽ¯å¢ƒé…ç½®
date: 2025-10-09
category: Python
tags:
  - çŽ¯å¢ƒé…ç½®
  - Python
---

åœ¨ Python å¼€å‘ä¸­ï¼Œ**åˆ‡æ¢çŽ¯å¢ƒ**é€šå¸¸æ˜¯æŒ‡åœ¨ä¸åŒçš„ Python çŽ¯å¢ƒä¹‹é—´åˆ‡æ¢ï¼Œæ¯”å¦‚ï¼š

- åœ¨ **å…¨å±€çŽ¯å¢ƒ** å’Œ **è™šæ‹ŸçŽ¯å¢ƒï¼ˆvenvï¼‰** ä¹‹é—´åˆ‡æ¢
- åœ¨å¤šä¸ª **è™šæ‹ŸçŽ¯å¢ƒ** ä¹‹é—´åˆ‡æ¢
- ä½¿ç”¨ **conda çŽ¯å¢ƒ** æ—¶ï¼Œåœ¨ä¸åŒ conda çŽ¯å¢ƒä¹‹é—´åˆ‡æ¢

ä¸‹é¢æˆ‘ä¼šè¯¦ç»†è®²è§£å¦‚ä½•åˆ‡æ¢è¿™äº›çŽ¯å¢ƒã€‚

---

## ðŸ§ª ä¸€ã€ä½¿ç”¨ `venv` åˆ›å»ºå’Œåˆ‡æ¢è™šæ‹ŸçŽ¯å¢ƒï¼ˆæŽ¨èï¼‰

### âœ… åˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒ

```bash
python -m venv env
```

è¿™ä¼šåœ¨å½“å‰ç›®å½•åˆ›å»ºä¸€ä¸ªåä¸º `env` çš„è™šæ‹ŸçŽ¯å¢ƒæ–‡ä»¶å¤¹ã€‚

---

### âœ… æ¿€æ´»è™šæ‹ŸçŽ¯å¢ƒï¼ˆWindows / macOS / Linuxï¼‰

#### Windows:

```cmd
env\Scripts\activate
```

æ¿€æ´»åŽå‘½ä»¤è¡Œä¼šå˜æˆè¿™æ ·ï¼š

```cmd
(env) C:\path\to\project>
```

#### macOS/Linux:

```bash
source env/bin/activate
```

æ¿€æ´»åŽå‘½ä»¤è¡Œä¼šå˜æˆè¿™æ ·ï¼š

```bash
(env) user@machine:~/project$
```

---

### âœ… é€€å‡ºè™šæ‹ŸçŽ¯å¢ƒ

æ— è®ºä»€ä¹ˆå¹³å°ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ï¼š

```bash
deactivate
```

é€€å‡ºåŽä¼šå›žåˆ°å…¨å±€ Python çŽ¯å¢ƒã€‚

---

## ðŸ äºŒã€ä½¿ç”¨ `conda` åˆ‡æ¢çŽ¯å¢ƒï¼ˆå¦‚æžœä½ ç”¨ Anaconda/Minicondaï¼‰

### âœ… åˆ›å»º conda çŽ¯å¢ƒ

```bash
conda create -n env python=3.9
```

### âœ… æ¿€æ´» conda çŽ¯å¢ƒ

```bash
conda activate env
```

### âœ… é€€å‡º conda çŽ¯å¢ƒ

```bash
conda deactivate
```

> ðŸ’¡ æ³¨æ„ï¼šå¦‚æžœä½ åŒæ—¶å®‰è£…äº† `venv` å’Œ `conda`ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨ conda æ¥ç®¡ç†çŽ¯å¢ƒã€‚

---

## ðŸ” ä¸‰ã€æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„ Python çŽ¯å¢ƒ

ä½ å¯ä»¥éšæ—¶è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥ç¡®è®¤ä½ å½“å‰ä½¿ç”¨çš„æ˜¯å“ªä¸ª Python å’Œ pipï¼š

```bash
which python   # Linux/macOS
where python   # Windows
```

æˆ–è€…ï¼š

```bash
python --version
pip --version
```

è¾“å‡ºç¤ºä¾‹ï¼š

```
Python 3.10.13
pip 24.0 from /home/user/anaconda3/envs/env/lib/python3.10/site-packages/pip (python 3.10)
```

---

## ðŸ“¦ å››ã€å¤šçŽ¯å¢ƒå¿«é€Ÿåˆ‡æ¢æŠ€å·§

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ `.bashrc` / `.zshrc` / `.bash_profile` è®¾ç½®åˆ«åï¼ˆLinux/macOSï¼‰

```bash
alias work="source ~/work_env/bin/activate"
alias personal="source ~/personal_env/bin/activate"
```

ç„¶åŽæ‰§è¡Œï¼š

```bash
source ~/.bashrc
```

ä¹‹åŽåªéœ€è¾“å…¥ï¼š

```bash
work
```

å³å¯å¿«é€Ÿè¿›å…¥å·¥ä½œçŽ¯å¢ƒã€‚

---

### æ–¹æ³•äºŒï¼šä½¿ç”¨ IDEï¼ˆå¦‚ VS Codeã€PyCharmï¼‰è‡ªåŠ¨è¯†åˆ«å¹¶åˆ‡æ¢çŽ¯å¢ƒ

çŽ°ä»£ IDE éƒ½æ”¯æŒè‡ªåŠ¨æ£€æµ‹é¡¹ç›®ä¸­çš„è™šæ‹ŸçŽ¯å¢ƒï¼Œå¹¶å…è®¸ä½ åœ¨ç•Œé¢ä¸­ä¸€é”®åˆ‡æ¢è§£é‡Šå™¨ã€‚

#### VS Code ç¤ºä¾‹ï¼š

1. æ‰“å¼€å‘½ä»¤é¢æ¿ï¼ˆCtrl + Shift + Pï¼‰
2. è¾“å…¥ `Python: Select Interpreter`
3. é€‰æ‹©ä½ è¦ä½¿ç”¨çš„çŽ¯å¢ƒ

---

## ðŸ§  å°è´´å£«

| ç›®æ ‡                  | æŽ¨èåšæ³•                                             |
| --------------------- | ---------------------------------------------------- |
| å¿«é€Ÿéš”ç¦»é¡¹ç›®ä¾èµ–      | ä½¿ç”¨ `venv`                                          |
| æ•°æ®ç§‘å­¦/æœºå™¨å­¦ä¹ é¡¹ç›® | ä½¿ç”¨ `conda`                                         |
| å¤šä¸ª Python ç‰ˆæœ¬å…±å­˜  | ä½¿ç”¨ `pyenv`ï¼ˆmacOS/Linuxï¼‰æˆ– `py` å¯åŠ¨å™¨ï¼ˆWindowsï¼‰ |

---

## â“å¸¸è§é—®é¢˜è§£ç­”

### Q: å¦‚ä½•çŸ¥é“æˆ‘å½“å‰åœ¨å“ªä¸ªçŽ¯å¢ƒï¼Ÿ

A: æŸ¥çœ‹ç»ˆç«¯æç¤ºç¬¦ï¼ˆå¦‚ `(env)`ï¼‰ï¼Œæˆ–è€…è¿è¡Œï¼š

```bash
which python
```

### Q: è™šæ‹ŸçŽ¯å¢ƒæ˜¯å¦å¯ä»¥è·¨å¹³å°å¤åˆ¶ï¼Ÿ

A: ä¸æŽ¨èã€‚ä¸åŒç³»ç»Ÿç¼–è¯‘çš„åº“å¯èƒ½ä¸å…¼å®¹ã€‚åº”è¯¥åœ¨ç›®æ ‡ç³»ç»Ÿé‡æ–°åˆ›å»ºçŽ¯å¢ƒã€‚

---

åœ¨ Python é¡¹ç›®ä¸­ï¼Œ`requirements.txt` æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„æ–‡ä»¶ï¼Œå®ƒåˆ—å‡ºäº†é¡¹ç›®ä¾èµ–çš„åŒ…åŠå…¶ç‰ˆæœ¬ã€‚ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼æ¥ä¸‹è½½è¿™äº›ä¾èµ–åŒ…ï¼š

---

## âœ… ä¸€ã€ä½¿ç”¨ `pip` å®‰è£… requirements.txt ä¸­çš„ä¾èµ–

### 1. **å®‰è£…ä¾èµ–ï¼ˆè”ç½‘çŠ¶æ€ä¸‹ï¼‰**

å¦‚æžœä½ æœ‰ç½‘ç»œè¿žæŽ¥ï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…ï¼š

```bash
pip install -r requirements.txt
```

è¿™ä¼šä»Ž [PyPI](https://pypi.org/) ä¸‹è½½å¹¶å®‰è£…æ‰€æœ‰åˆ—å‡ºçš„åŒ…ã€‚

---

## âœ… äºŒã€ç¦»çº¿å®‰è£…ï¼šå…ˆä¸‹è½½å†å®‰è£…

å¦‚æžœä½ éœ€è¦**åœ¨æ²¡æœ‰ç½‘ç»œçš„çŽ¯å¢ƒä¸­å®‰è£…ä¾èµ–**ï¼Œå¯ä»¥å…ˆåœ¨ä¸€ä¸ªæœ‰ç½‘çš„çŽ¯å¢ƒä¸­ä¸‹è½½å¥½æ‰€æœ‰ä¾èµ–åŒ…ï¼Œç„¶åŽå¤åˆ¶åˆ°ç›®æ ‡æœºå™¨ä¸Šè¿›è¡Œå®‰è£…ã€‚

### 2.1 åœ¨æœ‰ç½‘ç»œçš„æœºå™¨ä¸Šä¸‹è½½ä¾èµ–åŒ…

```bash
pip download -r requirements.txt -d ./packages
```

- `-d ./packages` è¡¨ç¤ºå°†æ‰€æœ‰ä¾èµ–åŒ…ä¸‹è½½åˆ°å½“å‰ç›®å½•ä¸‹çš„ `packages` æ–‡ä»¶å¤¹ä¸­ã€‚

### 2.2 å°† packages æ–‡ä»¶å¤¹å¤åˆ¶åˆ°ç›®æ ‡æœºå™¨

æ¯”å¦‚ç”¨ U ç›˜ã€å±€åŸŸç½‘ä¼ è¾“ç­‰æ–¹å¼ã€‚

### 2.3 åœ¨æ— ç½‘ç»œçš„æœºå™¨ä¸Šå®‰è£…æœ¬åœ°ä¾èµ–åŒ…

```bash
pip install --no-index --find-links=./packages -r requirements.txt
```

- `--no-index`ï¼šç¦æ­¢ä»Žç½‘ç»œæŸ¥æ‰¾åŒ…ã€‚
- `--find-links=./packages`ï¼šæŒ‡å®šæœ¬åœ°åŒ…çš„è·¯å¾„ã€‚

---

## âœ… ä¸‰ã€ç”Ÿæˆ requirements.txt æ–‡ä»¶ï¼ˆè¡¥å……ï¼‰

å¦‚æžœä½ æ˜¯é¡¹ç›®çš„å¼€å‘è€…ï¼Œæƒ³è¦ç”Ÿæˆè‡ªå·±çš„ `requirements.txt` æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ï¼š

```bash
pip freeze > requirements.txt
```

> âš ï¸ æ³¨æ„ï¼š`pip freeze` ä¼šå¯¼å‡ºå½“å‰è™šæ‹ŸçŽ¯å¢ƒæˆ–å…¨å±€çŽ¯å¢ƒä¸­æ‰€æœ‰å·²å®‰è£…çš„åŒ…ï¼ŒåŒ…æ‹¬ä½ å¯èƒ½ä¸éœ€è¦çš„ä¾èµ–ã€‚å»ºè®®ä½¿ç”¨è™šæ‹ŸçŽ¯å¢ƒï¼ˆå¦‚ `venv`ï¼‰å¼€å‘é¡¹ç›®ã€‚

æˆ–è€…ä½¿ç”¨æ›´ç²¾ç¡®çš„æ–¹å¼ï¼ˆæŽ¨èï¼‰ï¼š

```bash
pip install pipreqs
pipreqs ./ --encoding=utf8 --force
```

è¿™ä¸ªå·¥å…·ä¼šæ ¹æ®ä½ çš„ä»£ç å®žé™…ä½¿ç”¨çš„ import åŒ…æ¥ç”Ÿæˆ requirementsã€‚

---

## âœ… å››ã€å¸¸è§é—®é¢˜

### Q: requirements.txt æ ¼å¼æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ

A: ç¤ºä¾‹å†…å®¹å¦‚ä¸‹ï¼š

```
requests==2.31.0
numpy>=1.24.0
pandas
flask>=2.0.0,<3.0.0
```

æ¯è¡Œä¸€ä¸ªåŒ…åï¼Œå¯é€‰æŒ‡å®šç‰ˆæœ¬å·ã€‚

---

## âœ… æ€»ç»“

| æ“ä½œ                  | å‘½ä»¤                                                                 |
| --------------------- | -------------------------------------------------------------------- |
| å®‰è£… requirements     | `pip install -r requirements.txt`                                    |
| ä»…ä¸‹è½½ä¸å®‰è£…          | `pip download -r requirements.txt -d ./packages`                     |
| ç¦»çº¿å®‰è£…              | `pip install --no-index --find-links=./packages -r requirements.txt` |
| ç”Ÿæˆ requirements.txt | `pip freeze > requirements.txt` æˆ– `pipreqs .`                       |

---
