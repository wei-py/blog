---
title: 20250919
date: 2025-09-19
category: daily
tags:
  - blog
---

## 创建证书

### CSR (Certificate Signing Request)

本地生成的、包含公钥信息的请求文件。它是创建证书的“门票”。

1. 打开“钥匙串访问”

2. 选择菜单：钥匙串访问 > 证书助理 > 从证书颁发机构请求证书...。

3. 填写“用户电子邮件地址”和“常用名称”，“CA 电子邮件地址”留空，选择“存储到磁盘”，然后点击“继续”。

### 私钥 (Private Key)

生成 CSR 时创建的，永远保留在您的 Mac 钥匙串中，绝不能泄露。它是我(你)签名应用的“密码”。

### 证书 (Certificate)

Apple 官方签发的 .cer 文件，它证明了您的公钥是合法的。它必须与我(你)的私钥配对才能使用。

### 证书 .cer 导出为.p12文件

您想把刚刚安装到“钥匙串访问”中的 **Apple Development 证书** 导出为 `.p12` 文件，这是非常常见的需求，尤其是在需要将证书和私钥一起迁移到另一台 Mac 或在 CI/CD 系统（如 Jenkins, GitHub Actions）中使用时。

`.p12` 文件（也叫 PKCS#12 文件）是一个安全的容器，它**同时包含了您的证书和与之配对的私钥**。而您从 Apple 下载的 `.cer` 文件只包含证书，不包含私钥。

---

### ✅ 将证书导出为 .p12 文件的步骤

1. **打开“钥匙串访问”**：

   - 在您的 Mac 上，前往 `/Applications/Utilities/` 文件夹，打开 **“钥匙串访问”** 应用。

2. **找到您的证书**：

   - 在左侧边栏中，选择 **“登录”** 钥匙串（通常默认就是它）。
   - 在右侧上方的搜索框中，输入您的证书名称，例如 `Apple Development`，快速定位。
   - 在“种类”分类中，选择 **“我的证书”**。这样可以过滤出那些包含私钥的证书。

3. **选择并导出**：

   - 找到您的 `Apple Development: ...` 证书，**选中它**（点击一次）。
   - **重要**：请确保您选中的是证书本身，而不是它下面展开的私钥。选中证书后，您应该能看到它旁边有一个小三角形，点开后能看到私钥。
   - 从顶部菜单栏中，选择：`文件` > `导出项目...`。

4. **保存文件**：

   - 在弹出的保存对话框中，选择一个位置（例如桌面）。
   - 为文件命名，例如：`iOS_Development.p12`。
   - 在“文件格式”下拉菜单中，选择 **`个人信息交换 (.p12)`**。
   - 点击 **`保存`**。

5. **设置密码**：
   - 系统会弹出一个对话框，要求您为 `.p12` 文件设置一个密码。
   - **请务必设置一个强密码并安全保管！** 这个密码用于保护您的私钥，没有它就无法在其他地方使用这个 `.p12` 文件。
   - 输入密码并确认，然后点击 **`好`**。

---

> **注意**：`.p12` 文件是高度敏感的，请像保护您的 Apple ID 密码一样保护它，切勿泄露。如果怀疑泄露，请立即在 Apple Developer 账户中撤销对应的证书。

```sh
# 将 .p12 文件转为 Base64 并复制到剪贴板
basec() {
    if [ -z "$1" ]; then
        echo "❌ 请提供一个 .p12 文件路径。"
        echo "用法: basec your_file.p12"
        return 1
    fi

    if [ ! -f "$1" ]; then
        echo "❌ 文件 '$1' 不存在。"
        return 1
    fi

    echo "✅ 正在处理文件: $1"
    base64 -i "$1" | pbcopy
    echo "🎉 文件已编码为 Base64 并复制到剪贴板！"
}

```
