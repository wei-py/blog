import{_ as i,c as a,o as t,ah as n}from"./chunks/framework.Dtp82s2t.js";const g=JSON.parse('{"title":"å›¾ç‰‡çš„æ‡’åŠ è½½","description":"ç½‘ç«™å¼€å‘ä¸­, å®ç°å›¾ç‰‡çš„æ‡’åŠ è½½","frontmatter":{"title":"å›¾ç‰‡çš„æ‡’åŠ è½½","date":"2025-05-04T00:00:00.000Z","category":"å‰ç«¯","tags":["frontEnd","lazyLoad","img","optimize"],"description":"ç½‘ç«™å¼€å‘ä¸­, å®ç°å›¾ç‰‡çš„æ‡’åŠ è½½"},"headers":[],"relativePath":"posts/å‰ç«¯/loading-img.md","filePath":"posts/å‰ç«¯/loading-img.md"}'),h={name:"posts/å‰ç«¯/loading-img.md"};function l(k,s,p,e,r,E){return t(),a("div",null,s[0]||(s[0]=[n(`<p>ä»¥ä¸‹æ˜¯å››ç§å®ç°å›¾ç‰‡æ‡’åŠ è½½ï¼ˆLazy Loadï¼‰çš„å¸¸è§æ–¹æ¡ˆï¼Œç»“åˆçŸ¥è¯†åº“å†…å®¹è¿›è¡Œè¯´æ˜å¹¶é™„å¸¦ä»£ç ç¤ºä¾‹ã€‚</p><hr><h3 id="âœ…-æ–¹æ¡ˆä¸€-ä½ç½®è®¡ç®—-æ»šåŠ¨äº‹ä»¶-scroll-dataset-api" tabindex="-1">âœ… æ–¹æ¡ˆä¸€ï¼šä½ç½®è®¡ç®— + æ»šåŠ¨äº‹ä»¶ (Scroll) + DataSet API <a class="header-anchor" href="#âœ…-æ–¹æ¡ˆä¸€-ä½ç½®è®¡ç®—-æ»šåŠ¨äº‹ä»¶-scroll-dataset-api" aria-label="Permalink to &quot;âœ… æ–¹æ¡ˆä¸€ï¼šä½ç½®è®¡ç®— + æ»šåŠ¨äº‹ä»¶ (Scroll) + DataSet API&quot;">â€‹</a></h3><h4 id="åŸç†" tabindex="-1">åŸç†ï¼š <a class="header-anchor" href="#åŸç†" aria-label="Permalink to &quot;åŸç†ï¼š&quot;">â€‹</a></h4><p>é€šè¿‡ç›‘å¬ <code>scroll</code> äº‹ä»¶ï¼Œå¹¶ä½¿ç”¨ <code>offsetTop</code>ã€<code>scrollTop</code> ç­‰å±æ€§è®¡ç®—å›¾ç‰‡æ˜¯å¦è¿›å…¥è§†å£ã€‚ä½¿ç”¨ <code>data-src</code> å­˜å‚¨çœŸå®å›¾ç‰‡åœ°å€ï¼Œé¿å…æå‰åŠ è½½ ã€‚</p><h4 id="html-ç¤ºä¾‹" tabindex="-1">HTML ç¤ºä¾‹ï¼š <a class="header-anchor" href="#html-ç¤ºä¾‹" aria-label="Permalink to &quot;HTML ç¤ºä¾‹ï¼š&quot;">â€‹</a></h4><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">img</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> data-src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;image1.jpg&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> alt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Lazy Image&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;lazy-img&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span></code></pre></div><h4 id="javascript-ç¤ºä¾‹" tabindex="-1">JavaScript ç¤ºä¾‹ï¼š <a class="header-anchor" href="#javascript-ç¤ºä¾‹" aria-label="Permalink to &quot;JavaScript ç¤ºä¾‹ï¼š&quot;">â€‹</a></h4><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lazyLoad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> images</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelectorAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;.lazy-img&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> scrollTop</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window.scrollY </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window.pageYOffset;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> windowHeight</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window.innerHeight;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	images.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">img</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> offsetTop</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> img.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBoundingClientRect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().top </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> scrollTop;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (offsetTop </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> scrollTop </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> windowHeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">img.src) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			img.src </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> img.dataset.src;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	});</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;scroll&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lazyLoad);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;load&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lazyLoad); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é¡µé¢åŠ è½½æ—¶ä¹Ÿæ£€æŸ¥ä¸€æ¬¡</span></span></code></pre></div><hr><h3 id="âœ…-æ–¹æ¡ˆäºŒ-getboundingclientrect-api-scroll-with-throttle-dataset-api" tabindex="-1">âœ… æ–¹æ¡ˆäºŒï¼šgetBoundingClientRect API + Scroll with Throttle + DataSet API <a class="header-anchor" href="#âœ…-æ–¹æ¡ˆäºŒ-getboundingclientrect-api-scroll-with-throttle-dataset-api" aria-label="Permalink to &quot;âœ… æ–¹æ¡ˆäºŒï¼šgetBoundingClientRect API + Scroll with Throttle + DataSet API&quot;">â€‹</a></h3><h4 id="åŸç†-1" tabindex="-1">åŸç†ï¼š <a class="header-anchor" href="#åŸç†-1" aria-label="Permalink to &quot;åŸç†ï¼š&quot;">â€‹</a></h4><p>ä¸æ–¹æ¡ˆä¸€ç±»ä¼¼ï¼Œä½†ä½¿ç”¨ <code>getBoundingClientRect()</code> è·å–å…ƒç´ ç›¸å¯¹äºè§†å£çš„ä½ç½®ï¼Œæ›´ç²¾ç¡®åˆ¤æ–­æ˜¯å¦è¿›å…¥å¯è§†åŒºåŸŸï¼Œå¹¶åŠ å…¥èŠ‚æµå‡½æ•°ä¼˜åŒ–æ€§èƒ½ ã€‚</p><h4 id="javascript-ç¤ºä¾‹-1" tabindex="-1">JavaScript ç¤ºä¾‹ï¼š <a class="header-anchor" href="#javascript-ç¤ºä¾‹-1" aria-label="Permalink to &quot;JavaScript ç¤ºä¾‹ï¼š&quot;">â€‹</a></h4><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> throttle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">delay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> timer;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">timer) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			timer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				fn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">arguments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				timer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			}, delay);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lazyLoad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> images</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelectorAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;.lazy-img&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	images.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">img</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rect</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> img.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBoundingClientRect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rect.top </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window.innerHeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rect.bottom </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">img.src) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			img.src </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> img.dataset.src;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	});</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;scroll&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">throttle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(lazyLoad, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;load&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lazyLoad);</span></span></code></pre></div><hr><h3 id="âœ…-æ–¹æ¡ˆä¸‰-intersectionobserver-api-dataset-api" tabindex="-1">âœ… æ–¹æ¡ˆä¸‰ï¼šIntersectionObserver API + DataSet API <a class="header-anchor" href="#âœ…-æ–¹æ¡ˆä¸‰-intersectionobserver-api-dataset-api" aria-label="Permalink to &quot;âœ… æ–¹æ¡ˆä¸‰ï¼šIntersectionObserver API + DataSet API&quot;">â€‹</a></h3><h4 id="åŸç†-2" tabindex="-1">åŸç†ï¼š <a class="header-anchor" href="#åŸç†-2" aria-label="Permalink to &quot;åŸç†ï¼š&quot;">â€‹</a></h4><p>ä½¿ç”¨ç°ä»£æµè§ˆå™¨æä¾›çš„ <code>IntersectionObserver</code> API ç›‘å¬å…ƒç´ æ˜¯å¦è¿›å…¥è§†å£ï¼Œæ— éœ€æ‰‹åŠ¨è®¡ç®—ä½ç½®ï¼Œæ€§èƒ½æ›´ä¼˜ ã€‚</p><h4 id="javascript-ç¤ºä¾‹-2" tabindex="-1">JavaScript ç¤ºä¾‹ï¼š <a class="header-anchor" href="#javascript-ç¤ºä¾‹-2" aria-label="Permalink to &quot;JavaScript ç¤ºä¾‹ï¼š&quot;">â€‹</a></h4><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> observer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IntersectionObserver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">entries</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">observer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	entries.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">entry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (entry.isIntersecting) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">			const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> img</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> entry.target;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			img.src </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> img.dataset.src;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			observer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unobserve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(img); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åŠ è½½ååœæ­¢è§‚å¯Ÿ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	});</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelectorAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;.lazy-img&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">img</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> observer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">observe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(img));</span></span></code></pre></div><hr><h3 id="âœ…-æ–¹æ¡ˆå››-html-åŸç”Ÿ-loading-lazy-å±æ€§" tabindex="-1">âœ… æ–¹æ¡ˆå››ï¼šHTML åŸç”Ÿ <code>loading=&quot;lazy&quot;</code> å±æ€§ <a class="header-anchor" href="#âœ…-æ–¹æ¡ˆå››-html-åŸç”Ÿ-loading-lazy-å±æ€§" aria-label="Permalink to &quot;âœ… æ–¹æ¡ˆå››ï¼šHTML åŸç”Ÿ \`loading=&quot;lazy&quot;\` å±æ€§&quot;">â€‹</a></h3><h4 id="åŸç†-3" tabindex="-1">åŸç†ï¼š <a class="header-anchor" href="#åŸç†-3" aria-label="Permalink to &quot;åŸç†ï¼š&quot;">â€‹</a></h4><p>åˆ©ç”¨ <code>&lt;img&gt;</code> å’Œ <code>&lt;iframe&gt;</code> çš„åŸç”Ÿ <code>loading=&quot;lazy&quot;</code> å±æ€§å®ç°æ‡’åŠ è½½ï¼Œæ— éœ€é¢å¤– JS è„šæœ¬ï¼Œæœ€ç®€å•çš„æ–¹å¼ ã€‚</p><h4 id="html-ç¤ºä¾‹-1" tabindex="-1">HTML ç¤ºä¾‹ï¼š <a class="header-anchor" href="#html-ç¤ºä¾‹-1" aria-label="Permalink to &quot;HTML ç¤ºä¾‹ï¼š&quot;">â€‹</a></h4><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">img</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;image4.jpg&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> alt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Lazy Image&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loading</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;lazy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span></code></pre></div><p>âš ï¸ æ³¨æ„ï¼šæ­¤æ–¹æ³•å…¼å®¹æ€§è¾ƒå¥½ä½†æ§åˆ¶åŠ›è¾ƒå¼±ï¼Œé€‚ç”¨äºä¸éœ€è¦å¤æ‚é€»è¾‘çš„åœºæ™¯ã€‚</p><hr><h3 id="ğŸ“Œ-æ€»ç»“å¯¹æ¯”" tabindex="-1">ğŸ“Œ æ€»ç»“å¯¹æ¯”ï¼š <a class="header-anchor" href="#ğŸ“Œ-æ€»ç»“å¯¹æ¯”" aria-label="Permalink to &quot;ğŸ“Œ æ€»ç»“å¯¹æ¯”ï¼š&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>æ–¹æ¡ˆ</th><th>å…¼å®¹æ€§</th><th>æ§åˆ¶åŠ›</th><th>æ¨èç¨‹åº¦</th></tr></thead><tbody><tr><td>ä½ç½®è®¡ç®— + scroll + dataset</td><td>é«˜</td><td>ä¸­</td><td>â­â­</td></tr><tr><td>getBoundingClientRect + scroll + throttle + dataset</td><td>é«˜</td><td>ä¸­é«˜</td><td>â­â­â­</td></tr><tr><td>Intersection Observer + dataset</td><td>è¾ƒé«˜</td><td>é«˜</td><td>â­â­â­â­</td></tr><tr><td><code>loading=&quot;lazy&quot;</code> åŸç”Ÿå±æ€§</td><td>æœ€é«˜</td><td>ä½</td><td>â­â­â­</td></tr></tbody></table><blockquote><p><strong>æ¨èä¼˜å…ˆé¡ºåº</strong>ï¼š<br> è‹¥éœ€ç²¾ç»†æ§åˆ¶ï¼Œå»ºè®®ä½¿ç”¨ <strong>IntersectionObserver API</strong>ï¼›<br> è‹¥é¡¹ç›®å¯¹å…¼å®¹æ€§å’Œæ€§èƒ½è¦æ±‚ä¸é«˜ï¼Œå¯ä½¿ç”¨ <strong><code>loading=&quot;lazy&quot;</code></strong> å¿«é€Ÿå®ç° ã€‚</p></blockquote>`,32)]))}const o=i(h,[["render",l]]);export{g as __pageData,o as default};
